openapi: 3.0.3
info:
  title: Habits & Tasks Management API
  description: |
    # üéØ REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–≤—ã—á–∫–∞–º–∏ –∏ –∑–∞–¥–∞—á–∞–º–∏
    
    ## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
    –≠—Ç–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç-–ø–æ–ª–∏–≥–æ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫:
    - **Frontend**: React + TypeScript —Å FSD (Feature-Sliced Design) –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
    - **Backend**: Go (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
    - **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
    
    ## –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
    
    ### üìÖ Habits (–ü—Ä–∏–≤—ã—á–∫–∏)
    - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ —á–∞—Å—Ç–æ—Ç—ã:
      - **daily** - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏
      - **weekly** - –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
      - **custom** - –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏
    - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ —Å–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (streaks)
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Pomodoro —Ç–∞–π–º–µ—Ä–æ–º
    - GitHub-style contribution calendar
    
    ### ‚úÖ Tasks (–ó–∞–¥–∞—á–∏)
    - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ (low, medium, high)
    - –°—Ç–∞—Ç—É—Å—ã –∑–∞–¥–∞—á (pending, in_progress, completed, cancelled)
    - –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á
    - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Pomodoro –¥–ª—è time tracking
    
    ### üçÖ Pomodoro Sessions
    - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö —Å–µ—Å—Å–∏–π
    - –¢–∏–ø—ã —Å–µ—Å—Å–∏–π: —Ä–∞–±–æ—Ç–∞, –∫–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–µ—Ä—ã–≤, –¥–ª–∏–Ω–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤
    - –°–≤—è–∑—å —Å –ø—Ä–∏–≤—ã—á–∫–∞–º–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    
    ### üìä Statistics & Analytics
    - –¢–µ–∫—É—â–∏–µ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Å–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    - –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    - –°—Ä–µ–¥–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–Ω–µ–¥–µ–ª—å–Ω—ã–µ, –º–µ—Å—è—á–Ω—ã–µ)
    - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    
    ## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    üîê –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏: —Ä–∞–±–æ—Ç–∞ —Å –º–æ–∫–∞–º–∏ –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
    
    üìã –í –±—É–¥—É—â–µ–º: JWT —Ç–æ–∫–µ–Ω—ã –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization: Bearer <token>`
    
  version: 1.0.0
  contact:
    name: GitHub Repository
    url: https://github.com/your-username/your-repo

servers:
  - url: http://localhost:8080/api/v1
    description: üñ•Ô∏è –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  - url: https://api.example.com/v1
    description: üåê Production —Å–µ—Ä–≤–µ—Ä (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)

tags:
  - name: Habits
    description: |
      ## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∞–º–∏
      
      –ü—Ä–∏–≤—ã—á–∫–∞ - —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω–æ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏.
      
  - name: Habit Completions
    description: |
      ## –û—Ç–º–µ—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–≤—ã—á–µ–∫
      
      –ö–∞–∂–¥–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –∑–∞–ø–∏—Å—å—é —Å –¥–∞—Ç–æ–π, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º pomodoro –∏ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å—é.
      
  - name: Tasks
    description: |
      ## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏
      
      –ó–∞–¥–∞—á–∞ - —ç—Ç–æ —Ä–∞–∑–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å –¥–µ–¥–ª–∞–π–Ω–æ–º. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–∏–≤—ã—á–µ–∫, –∑–∞–¥–∞—á–∏ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è.
      
  - name: Pomodoro
    description: |
      ## Pomodoro —Å–µ—Å—Å–∏–∏
      
      –¢–µ—Ö–Ω–∏–∫–∞ Pomodoro –¥–ª—è time tracking: —Ä–∞–±–æ—á–∏–µ —Å–µ—Å—Å–∏–∏ –ø–æ 25 –º–∏–Ω—É—Ç —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ –∏ –¥–ª–∏–Ω–Ω—ã–º–∏ –ø–µ—Ä–µ—Ä—ã–≤–∞–º–∏.
      
  - name: Statistics
    description: |
      ## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
      
      –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø—Ä–∏–≤—ã—á–µ–∫ –∏ –∑–∞–¥–∞—á.

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT —Ç–æ–∫–µ–Ω (–≤ –±—É–¥—É—â–µ–º)

  schemas:
    # ==================== ENUMS ====================
    
    FrequencyType:
      type: string
      enum: [daily, weekly, custom]
      description: |
        **–¢–∏–ø —á–∞—Å—Ç–æ—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–≤—ã—á–∫–∏:**
        
        - `daily` - –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
        - `weekly` - –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
        - `custom` - –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏
      example: daily
    
    PomodoroType:
      type: string
      enum: [work, shortBreak, longBreak]
      description: |
        **–¢–∏–ø pomodoro —Å–µ—Å—Å–∏–∏:**
        
        - `work` - —Ä–∞–±–æ—á–∞—è —Å–µ—Å—Å–∏—è (25 –º–∏–Ω—É—Ç)
        - `shortBreak` - –∫–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–µ—Ä—ã–≤ (5 –º–∏–Ω—É—Ç)
        - `longBreak` - –¥–ª–∏–Ω–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤ (15-30 –º–∏–Ω—É—Ç)
      example: work
    
    IntensityLevel:
      type: integer
      enum: [0, 1, 2, 3, 4]
      description: |
        **–£—Ä–æ–≤–µ–Ω—å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
        
        - `0` - –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ
        - `1` - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —É—Å–∏–ª–∏–µ
        - `2` - —Å—Ä–µ–¥–Ω–µ–µ —É—Å–∏–ª–∏–µ
        - `3` - —Ö–æ—Ä–æ—à–µ–µ —É—Å–∏–ª–∏–µ
        - `4` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —É—Å–∏–ª–∏–µ
      example: 2
    
    Priority:
      type: string
      enum: [low, medium, high]
      description: |
        **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–¥–∞—á–∏:**
        
        - `low` - –º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å
        - `medium` - –≤–∞–∂–Ω–æ, –Ω–æ –Ω–µ —Å—Ä–æ—á–Ω–æ
        - `high` - —Å—Ä–æ—á–Ω–æ –∏ –≤–∞–∂–Ω–æ
      example: high
    
    TaskStatus:
      type: string
      enum: [pending, in_progress, completed, cancelled]
      description: |
        **–°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏:**
        
        - `pending` - –æ–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        - `in_progress` - –≤ —Ä–∞–±–æ—Ç–µ
        - `completed` - –∑–∞–≤–µ—Ä—à–µ–Ω–∞
        - `cancelled` - –æ—Ç–º–µ–Ω–µ–Ω–∞
      example: in_progress

    # ==================== HABIT MODELS ====================
    
    Habit:
      type: object
      required:
        - id
        - userId
        - name
        - frequency
        - reminderEnabled
        - startDate
        - goalDays
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
          example: h1
        userId:
          type: string
          example: u1
        name:
          type: string
          minLength: 1
          maxLength: 100
          example: Morning Meditation
        description:
          type: string
          maxLength: 500
          example: 20-minute mindfulness meditation every morning
        frequency:
          $ref: '#/components/schemas/FrequencyType'
        reminderTime:
          type: string
          format: time
          example: "07:00"
        reminderEnabled:
          type: boolean
          example: true
        targetDaysPerWeek:
          type: integer
          minimum: 1
          maximum: 7
          example: 5
        specificDays:
          type: array
          items:
            type: integer
            minimum: 0
            maximum: 6
          example: [1, 3, 5]
          description: 0=–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, 6=–°—É–±–±–æ—Ç–∞
        startDate:
          type: string
          format: date
          example: "2025-08-01"
        goalDays:
          type: integer
          minimum: 1
          example: 30
        archived:
          type: boolean
          default: false
        color:
          type: string
          pattern: '^#[0-9A-Fa-f]{6}$'
          example: "#FFD700"
        progress:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 60
        createdAt:
          type: string
          format: date-time
          example: "2025-08-01T06:30:00Z"
        updatedAt:
          type: string
          format: date-time
          example: "2025-11-01T07:00:00Z"

    HabitCreate:
      type: object
      required:
        - name
        - frequency
        - startDate
        - goalDays
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        description:
          type: string
          maxLength: 500
        frequency:
          $ref: '#/components/schemas/FrequencyType'
        reminderTime:
          type: string
          format: time
        reminderEnabled:
          type: boolean
          default: false
        targetDaysPerWeek:
          type: integer
          minimum: 1
          maximum: 7
        specificDays:
          type: array
          items:
            type: integer
            minimum: 0
            maximum: 6
        startDate:
          type: string
          format: date
        goalDays:
          type: integer
          minimum: 1
        color:
          type: string
          pattern: '^#[0-9A-Fa-f]{6}$'

    HabitUpdate:
      type: object
      properties:
        name:
          type: string
          maxLength: 100
        description:
          type: string
          maxLength: 500
        reminderTime:
          type: string
          format: time
        reminderEnabled:
          type: boolean
        targetDaysPerWeek:
          type: integer
        specificDays:
          type: array
          items:
            type: integer
        color:
          type: string
        archived:
          type: boolean

    HabitCompletion:
      type: object
      required:
        - id
        - habitId
        - userId
        - date
        - completed
        - pomodoros
      properties:
        id:
          type: string
          example: hc1
        habitId:
          type: string
          example: h1
        userId:
          type: string
          example: u1
        date:
          type: string
          format: date
          example: "2025-11-01"
        completed:
          type: boolean
          example: true
        pomodoros:
          type: integer
          minimum: 0
          example: 1
        intensity:
          $ref: '#/components/schemas/IntensityLevel'
        completedAt:
          type: string
          format: date-time
          example: "2025-11-01T07:20:00Z"
        note:
          type: string
          maxLength: 500
          example: Felt focused

    HabitCompletionCreate:
      type: object
      required:
        - habitId
        - date
        - completed
        - pomodoros
      properties:
        habitId:
          type: string
        date:
          type: string
          format: date
        completed:
          type: boolean
        pomodoros:
          type: integer
          minimum: 0
        intensity:
          $ref: '#/components/schemas/IntensityLevel'
        note:
          type: string
          maxLength: 500

    # ==================== TASK MODELS ====================
    
    Task:
      type: object
      required:
        - id
        - title
        - priority
        - pomodoro
        - status
        - createdAt
        - updatedAt
      properties:
        id:
          type: string
          description: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏
          example: "1"
        title:
          type: string
          minLength: 1
          maxLength: 200
          example: Buy groceries
        description:
          type: string
          maxLength: 2000
          example: Head to the local supermarket and pick up essentials
        dueDate:
          type: string
          format: date
          example: "2025-09-01"
        category:
          type: string
          description: |
            –ö–∞—Ç–µ–≥–æ—Ä–∏—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∑–∞–¥–∞—á.
            –ü—Ä–∏–º–µ—Ä—ã: Personal, Work, Health, Learning, Leisure
          example: Personal
        priority:
          $ref: '#/components/schemas/Priority'
        pomodoro:
          type: integer
          minimum: 0
          description: –û—Ü–µ–Ω–∫–∞ –∑–∞–¥–∞—á–∏ –≤ pomodoro (1 pomodoro ‚âà 25 –º–∏–Ω—É—Ç)
          example: 2
        status:
          $ref: '#/components/schemas/TaskStatus'
        createdAt:
          type: string
          format: date-time
          example: "2025-08-25T10:00:00Z"
        updatedAt:
          type: string
          format: date-time
          example: "2025-08-25T10:00:00Z"
      example:
        id: "1"
        title: Buy groceries
        description: Head to the local supermarket and pick up essentials
        status: pending
        priority: high
        dueDate: "2025-09-01"
        pomodoro: 2
        category: Personal
        createdAt: "2025-08-25T10:00:00Z"
        updatedAt: "2025-08-25T10:00:00Z"

    TaskCreate:
      type: object
      required:
        - title
        - priority
        - pomodoro
      properties:
        title:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          maxLength: 2000
        dueDate:
          type: string
          format: date
        category:
          type: string
        priority:
          $ref: '#/components/schemas/Priority'
        pomodoro:
          type: integer
          minimum: 0
      example:
        title: Build project
        description: Set up the new TypeScript project with proper configuration
        priority: high
        dueDate: "2025-08-30"
        pomodoro: 4
        category: Work

    TaskUpdate:
      type: object
      properties:
        title:
          type: string
          maxLength: 200
        description:
          type: string
          maxLength: 2000
        dueDate:
          type: string
          format: date
        category:
          type: string
        priority:
          $ref: '#/components/schemas/Priority'
        pomodoro:
          type: integer
          minimum: 0
        status:
          $ref: '#/components/schemas/TaskStatus'

    # ==================== POMODORO MODELS ====================
    
    PomodoroSession:
      type: object
      required:
        - id
        - habitId
        - userId
        - startedAt
        - duration
        - type
        - interrupted
      properties:
        id:
          type: string
          example: p1
        habitId:
          type: string
          example: h1
        userId:
          type: string
          example: u1
        startedAt:
          type: string
          format: date-time
          example: "2025-11-01T07:00:00Z"
        completedAt:
          type: string
          format: date-time
          example: "2025-11-01T07:20:00Z"
        duration:
          type: integer
          minimum: 0
          description: –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
          example: 1200
        type:
          $ref: '#/components/schemas/PomodoroType'
        interrupted:
          type: boolean
          example: false
        sessionNumber:
          type: integer
          minimum: 1
          example: 1

    PomodoroSessionCreate:
      type: object
      required:
        - habitId
        - duration
        - type
      properties:
        habitId:
          type: string
        duration:
          type: integer
          minimum: 0
        type:
          $ref: '#/components/schemas/PomodoroType'
        interrupted:
          type: boolean
          default: false
        sessionNumber:
          type: integer
          minimum: 1

    # ==================== STATISTICS MODELS ====================
    
    HabitStats:
      type: object
      required:
        - habitId
        - currentStreak
        - longestStreak
        - totalCompletions
        - totalPomodoros
        - averagePomodorosPerDay
        - completionRate
        - weeklyAverage
        - monthlyAverage
      properties:
        habitId:
          type: string
          example: h1
        currentStreak:
          type: integer
          minimum: 0
          example: 5
        longestStreak:
          type: integer
          minimum: 0
          example: 12
        totalCompletions:
          type: integer
          minimum: 0
          example: 18
        totalPomodoros:
          type: integer
          minimum: 0
          example: 20
        averagePomodorosPerDay:
          type: number
          format: float
          minimum: 0
          example: 1.1
        completionRate:
          type: number
          format: float
          minimum: 0
          maximum: 100
          example: 60
        weeklyAverage:
          type: number
          format: float
          minimum: 0
          example: 6
        monthlyAverage:
          type: number
          format: float
          minimum: 0
          example: 18
        lastCompletedDate:
          type: string
          format: date
          example: "2025-11-01"

    ContributionDay:
      type: object
      required:
        - date
        - count
        - level
        - completed
      properties:
        date:
          type: string
          format: date
          example: "2025-11-01"
        count:
          type: integer
          minimum: 0
          example: 1
        level:
          $ref: '#/components/schemas/IntensityLevel'
        completed:
          type: boolean
          example: true

    HabitChartData:
      type: object
      required:
        - date
        - completions
        - pomodoros
        - intensity
      properties:
        date:
          type: string
          format: date
          example: "2025-11-01"
        completions:
          type: integer
          minimum: 0
          example: 1
        pomodoros:
          type: integer
          minimum: 0
          example: 1
        intensity:
          $ref: '#/components/schemas/IntensityLevel'

    # ==================== ERROR MODELS ====================
    
    Error:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          example: Resource not found
        code:
          type: string
          example: NOT_FOUND
        details:
          type: object
          additionalProperties: true

# ==================== API ENDPOINTS ====================

paths:
  # ==================== HABITS ====================
  
  /habits:
    get:
      tags:
        - Habits
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–∏–≤—ã—á–µ–∫
      description: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–∏–≤—ã—á–µ–∫ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      operationId: getHabits
      parameters:
        - name: includeArchived
          in: query
          description: –í–∫–ª—é—á–∏—Ç—å –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏
          schema:
            type: boolean
            default: false
        - name: frequency
          in: query
          description: –§–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É —á–∞—Å—Ç–æ—Ç—ã
          schema:
            $ref: '#/components/schemas/FrequencyType'
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–æ
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Habit'
        '401':
          description: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
    
    post:
      tags:
        - Habits
      summary: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ø—Ä–∏–≤—ã—á–∫—É
      operationId: createHabit
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HabitCreate'
      responses:
        '201':
          description: –ü—Ä–∏–≤—ã—á–∫–∞ —Å–æ–∑–¥–∞–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Habit'
        '400':
          description: –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /habits/{habitId}:
    get:
      tags:
        - Habits
      summary: –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É –ø–æ ID
      operationId: getHabitById
      parameters:
        - name: habitId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–æ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Habit'
        '404':
          description: –ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '400':
          description: –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    
    delete:
      tags:
        - Tasks
      summary: –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
      description: |
        –£–¥–∞–ª—è–µ—Ç –∑–∞–¥–∞—á—É –∏–∑ —Å–∏—Å—Ç–µ–º—ã.
        
        **–í–Ω–∏–º–∞–Ω–∏–µ:** –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!
      operationId: deleteTask
      parameters:
        - name: taskId
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: –ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞
        '404':
          description: –ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

  /tasks/categories:
    get:
      tags:
        - Tasks
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
      description: |
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ –≤—Å–µ—Ö –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
        
        –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∑–∞–¥–∞—á –≤ UI.
      operationId: getTaskCategories
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
              example:
                - Personal
                - Work
                - Health
                - Learning
                - Leisure

  /tasks/stats:
    get:
      tags:
        - Tasks
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∑–∞–¥–∞—á–∞–º
      description: |
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º –∑–∞–¥–∞—á–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
        
        **–í–∫–ª—é—á–∞–µ—Ç:**
        - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
        - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º
        - –°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ pomodoro –Ω–∞ –∑–∞–¥–∞—á—É
        - –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
      operationId: getTasksStats
      responses:
        '200':
          description: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: integer
                    example: 30
                  byStatus:
                    type: object
                    properties:
                      pending:
                        type: integer
                        example: 15
                      in_progress:
                        type: integer
                        example: 8
                      completed:
                        type: integer
                        example: 5
                      cancelled:
                        type: integer
                        example: 2
                  byPriority:
                    type: object
                    properties:
                      low:
                        type: integer
                        example: 8
                      medium:
                        type: integer
                        example: 15
                      high:
                        type: integer
                        example: 7
                  averagePomodoro:
                    type: number
                    format: float
                    example: 3.5
                  completionRate:
                    type: number
                    format: float
                    description: –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
                    example: 16.7

  # ==================== POMODORO ====================
  
  /pomodoro/sessions:
    get:
      tags:
        - Pomodoro
      summary: –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é pomodoro —Å–µ—Å—Å–∏–π
      description: |
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö pomodoro —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
        
        **–§–∏–ª—å—Ç—Ä—ã:**
        - –ü–æ –ø—Ä–∏–≤—ã—á–∫–µ (habitId)
        - –ü–æ –ø–µ—Ä–∏–æ–¥—É –≤—Ä–µ–º–µ–Ω–∏ (startDate, endDate)
      operationId: getPomodoroSessions
      parameters:
        - name: habitId
          in: query
          description: –§–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–∏–≤—ã—á–∫–µ
          schema:
            type: string
        - name: startDate
          in: query
          description: –ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ –ø–µ—Ä–∏–æ–¥–∞
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          description: –ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ –ø–µ—Ä–∏–æ–¥–∞
          schema:
            type: string
            format: date
      responses:
        '200':
          description: –ò—Å—Ç–æ—Ä–∏—è —Å–µ—Å—Å–∏–π –ø–æ–ª—É—á–µ–Ω–∞
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PomodoroSession'
              example:
                - id: p1
                  habitId: h1
                  userId: u1
                  startedAt: "2025-11-01T07:00:00Z"
                  completedAt: "2025-11-01T07:20:00Z"
                  duration: 1200
                  type: work
                  interrupted: false
                  sessionNumber: 1
    
    post:
      tags:
        - Pomodoro
      summary: –°–æ–∑–¥–∞—Ç—å pomodoro —Å–µ—Å—Å–∏—é
      description: |
        –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é pomodoro —Å–µ—Å—Å–∏—é.
        
        **Workflow:**
        1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–∞–π–º–µ—Ä (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å)
        2. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è completedAt —á–µ—Ä–µ–∑ PATCH
        3. –ï—Å–ª–∏ –ø—Ä–µ—Ä–≤–∞–Ω–æ - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è interrupted: true
      operationId: createPomodoroSession
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PomodoroSessionCreate'
            examples:
              workSession:
                summary: –†–∞–±–æ—á–∞—è —Å–µ—Å—Å–∏—è
                value:
                  habitId: h1
                  duration: 1500
                  type: work
                  sessionNumber: 1
              shortBreak:
                summary: –ö–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–µ—Ä—ã–≤
                value:
                  habitId: h1
                  duration: 300
                  type: shortBreak
                  sessionNumber: 2
      responses:
        '201':
          description: –°–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PomodoroSession'

  /pomodoro/sessions/{sessionId}:
    get:
      tags:
        - Pomodoro
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏—é –ø–æ ID
      operationId: getPomodoroSessionById
      parameters:
        - name: sessionId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: –°–µ—Å—Å–∏—è –Ω–∞–π–¥–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PomodoroSession'
        '404':
          description: –°–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
    
    patch:
      tags:
        - Pomodoro
      summary: –ó–∞–≤–µ—Ä—à–∏—Ç—å –∏–ª–∏ –ø—Ä–µ—Ä–≤–∞—Ç—å —Å–µ—Å—Å–∏—é
      description: |
        –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–∏.
        
        **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
        - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å completedAt
        - –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å interrupted: true
      operationId: updatePomodoroSession
      parameters:
        - name: sessionId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                completedAt:
                  type: string
                  format: date-time
                interrupted:
                  type: boolean
            examples:
              complete:
                summary: –ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é
                value:
                  completedAt: "2025-11-14T08:25:00Z"
              interrupt:
                summary: –ü—Ä–µ—Ä–≤–∞—Ç—å —Å–µ—Å—Å–∏—é
                value:
                  interrupted: true
                  completedAt: "2025-11-14T08:15:00Z"
      responses:
        '200':
          description: –°–µ—Å—Å–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PomodoroSession'
        '404':
          description: –°–µ—Å—Å–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

  # ==================== STATISTICS ====================
  
  /habits/{habitId}/stats:
    get:
      tags:
        - Statistics
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –ø—Ä–∏–≤—ã—á–∫–µ
      description: |
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–≤—ã—á–∫–∏.
        
        **–í–∫–ª—é—á–∞–µ—Ç:**
        - –¢–µ–∫—É—â—É—é –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–µ—Ä–∏—é (streak)
        - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π
        - –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        - –°—Ä–µ–¥–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–Ω–µ–¥–µ–ª—å–Ω—ã–µ, –º–µ—Å—è—á–Ω—ã–µ)
      operationId: getHabitStats
      parameters:
        - name: habitId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HabitStats'
              example:
                habitId: h1
                currentStreak: 5
                longestStreak: 12
                totalCompletions: 18
                totalPomodoros: 20
                averagePomodorosPerDay: 1.1
                completionRate: 60
                weeklyAverage: 6
                monthlyAverage: 18
                lastCompletedDate: "2025-11-01"
        '404':
          description: –ü—Ä–∏–≤—ã—á–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

  /habits/{habitId}/chart:
    get:
      tags:
        - Statistics
      summary: –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
      description: |
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.
        
        **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
        –î–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å Chart.js, Recharts, D3.js –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.
      operationId: getHabitChartData
      parameters:
        - name: habitId
          in: path
          required: true
          schema:
            type: string
        - name: period
          in: query
          description: –ü–µ—Ä–∏–æ–¥ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
          schema:
            type: string
            enum: [week, month, year]
            default: month
      responses:
        '200':
          description: –î–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω—ã
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HabitChartData'
              example:
                - date: "2025-10-28"
                  completions: 1
                  pomodoros: 1
                  intensity: 1
                - date: "2025-10-30"
                  completions: 1
                  pomodoros: 2
                  intensity: 3
                - date: "2025-11-01"
                  completions: 1
                  pomodoros: 1
                  intensity: 2

  /habits/{habitId}/contributions:
    get:
      tags:
        - Statistics
      summary: –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è contribution calendar
      description: |
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è GitHub-style contribution calendar.
        
        **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
        - level (0-4) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —Ü–≤–µ—Ç–∞ –∫–ª–µ—Ç–∫–∏
        - –û–±—ã—á–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 365 –¥–Ω–µ–π
        - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
      operationId: getHabitContributions
      parameters:
        - name: habitId
          in: path
          required: true
          schema:
            type: string
        - name: days
          in: query
          description: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –Ω–∞–∑–∞–¥
          schema:
            type: integer
            default: 365
            minimum: 1
            maximum: 730
      responses:
        '200':
          description: –î–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø–æ–ª—É—á–µ–Ω—ã
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ContributionDay'
              example:
                - date: "2025-11-01"
                  count: 1
                  level: 2
                  completed: true
                - date: "2025-10-30"
                  count: 2
                  level: 3
                  completed: true
                - date: "2025-10-29"
                  count: 0
                  level: 0
                  completed: false

  /stats/overview:
    get:
      tags:
        - Statistics
      summary: –ü–æ–ª—É—á–∏—Ç—å –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      description: |
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º –ø—Ä–∏–≤—ã—á–∫–∞–º –∏ –∑–∞–¥–∞—á–∞–º.
        
        **–í–∫–ª—é—á–∞–µ—Ç:**
        - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫
        - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
        - –û–±—â–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        - –°—É–º–º–∞—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ pomodoro –∑–∞ –ø–µ—Ä–∏–æ–¥
      operationId: getOverviewStats
      responses:
        '200':
          description: –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–∞
          content:
            application/json:
              schema:
                type: object
                properties:
                  totalHabits:
                    type: integer
                    description: –í—Å–µ–≥–æ –ø—Ä–∏–≤—ã—á–µ–∫
                    example: 4
                  activeHabits:
                    type: integer
                    description: –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫ (–Ω–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö)
                    example: 4
                  totalTasks:
                    type: integer
                    description: –í—Å–µ–≥–æ –∑–∞–¥–∞—á
                    example: 30
                  completedTasks:
                    type: integer
                    description: –ó–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
                    example: 5
                  inProgressTasks:
                    type: integer
                    description: –ó–∞–¥–∞—á –≤ —Ä–∞–±–æ—Ç–µ
                    example: 6
                  pendingTasks:
                    type: integer
                    description: –ó–∞–¥–∞—á –≤ –æ–∂–∏–¥–∞–Ω–∏–∏
                    example: 19
                  totalPomodoros:
                    type: integer
                    description: –í—Å–µ–≥–æ pomodoro —Å–µ—Å—Å–∏–π
                    example: 120
                  averageCompletionRate:
                    type: number
                    format: float
                    description: –°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–≤—ã—á–µ–∫
                    example: 65.5
                  currentStreakAverage:
                    type: number
                    format: float
                    description: –°—Ä–µ–¥–Ω—è—è —Ç–µ–∫—É—â–∞—è —Å–µ—Ä–∏—è –ø–æ –≤—Å–µ–º –ø—Ä–∏–≤—ã—á–∫–∞–º
                    example: 4.2
              example:
                totalHabits: 4
                activeHabits: 4
                totalTasks: 30
                completedTasks: 5
                inProgressTasks: 6
                pendingTasks: 19
                totalPomodoros: 120
                averageCompletionRate: 65.5
                currentStreakAverage: 4.2':
          description: –ù–µ –Ω–∞–π–¥–µ–Ω–æ
    
    put:
      tags:
        - Habits
      summary: –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É
      operationId: updateHabit
      parameters:
        - name: habitId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HabitUpdate'
      responses:
        '200':
          description: –ü—Ä–∏–≤—ã—á–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Habit'
        '404':
          description: –ù–µ –Ω–∞–π–¥–µ–Ω–æ
    
    delete:
      tags:
        - Habits
      summary: –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–≤—ã—á–∫—É
      operationId: deleteHabit
      parameters:
        - name: habitId
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: –£–¥–∞–ª–µ–Ω–æ
        '404':
          description: –ù–µ –Ω–∞–π–¥–µ–Ω–æ

  # ==================== HABIT COMPLETIONS ====================
  
  /habits/{habitId}/completions:
    get:
      tags:
        - Habit Completions
      summary: –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–≤—ã—á–∫–∏
      operationId: getHabitCompletions
      parameters:
        - name: habitId
          in: path
          required: true
          schema:
            type: string
        - name: startDate
          in: query
          schema:
            type: string
            format: date
        - name: endDate
          in: query
          schema:
            type: string
            format: date
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–æ
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/HabitCompletion'
    
    post:
      tags:
        - Habit Completions
      summary: –û—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏
      operationId: createHabitCompletion
      parameters:
        - name: habitId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/HabitCompletionCreate'
      responses:
        '201':
          description: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–º–µ—á–µ–Ω–æ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HabitCompletion'

  /habits/{habitId}/completions/{date}:
    get:
      tags:
        - Habit Completions
      summary: –ü–æ–ª—É—á–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –¥–∞—Ç—É
      operationId: getHabitCompletionByDate
      parameters:
        - name: habitId
          in: path
          required: true
          schema:
            type: string
        - name: date
          in: path
          required: true
          schema:
            type: string
            format: date
      responses:
        '200':
          description: –£—Å–ø–µ—à–Ω–æ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HabitCompletion'
        '404':
          description: –ù–µ –Ω–∞–π–¥–µ–Ω–æ
    
    delete:
      tags:
        - Habit Completions
      summary: –£–¥–∞–ª–∏—Ç—å –æ—Ç–º–µ—Ç–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
      operationId: deleteHabitCompletion
      parameters:
        - name: habitId
          in: path
          required: true
          schema:
            type: string
        - name: date
          in: path
          required: true
          schema:
            type: string
            format: date
      responses:
        '204':
          description: –£–¥–∞–ª–µ–Ω–æ
        '404':
          description: –ù–µ –Ω–∞–π–¥–µ–Ω–æ

  # ==================== TASKS ====================
  
  /tasks:
    get:
      tags:
        - Tasks
      summary: –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–¥–∞—á
      description: |
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–¥–∞—á –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.
        
        **–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
        - `/tasks` - –≤—Å–µ –∑–∞–¥–∞—á–∏
        - `/tasks?status=pending` - —Ç–æ–ª—å–∫–æ pending –∑–∞–¥–∞—á–∏
        - `/tasks?priority=high` - —Ç–æ–ª—å–∫–æ –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
        - `/tasks?category=Work` - —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ –∑–∞–¥–∞—á–∏
      operationId: getTasks
      parameters:
        - name: status
          in: query
          description: –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
          schema:
            $ref: '#/components/schemas/TaskStatus'
        - name: priority
          in: query
          description: –§–∏–ª—å—Ç—Ä –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É
          schema:
            $ref: '#/components/schemas/Priority'
        - name: category
          in: query
          description: –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
          schema:
            type: string
          example: Work
      responses:
        '200':
          description: –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Task'
              examples:
                allTasks:
                  summary: –í—Å–µ –∑–∞–¥–∞—á–∏
                  value:
                    - id: "1"
                      title: Buy groceries
                      description: Head to the local supermarket
                      status: pending
                      priority: high
                      dueDate: "2025-09-01"
                      pomodoro: 2
                      category: Personal
                      createdAt: "2025-08-25T10:00:00Z"
                      updatedAt: "2025-08-25T10:00:00Z"
                    - id: "4"
                      title: Build project
                      description: Set up the new TypeScript project
                      status: in_progress
                      priority: high
                      dueDate: "2025-08-30"
                      pomodoro: 4
                      category: Work
                      createdAt: "2025-08-24T11:00:00Z"
                      updatedAt: "2025-08-28T16:45:00Z"
        '401':
          description: –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
    
    post:
      tags:
        - Tasks
      summary: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
      description: |
        –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
        
        **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:**
        - title (–Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏)
        - priority (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
        - pomodoro (–æ—Ü–µ–Ω–∫–∞ –≤ pomodoro)
        
        **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è:**
        - description
        - dueDate (–¥–µ–¥–ª–∞–π–Ω)
        - category
      operationId: createTask
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TaskCreate'
            examples:
              simpleTask:
                summary: –ü—Ä–æ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞
                value:
                  title: Call client
                  priority: medium
                  pomodoro: 2
                  category: Work
              detailedTask:
                summary: –î–µ—Ç–∞–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞
                value:
                  title: Review pull requests
                  description: Code review session for team's pending PRs
                  priority: medium
                  dueDate: "2025-08-31"
                  pomodoro: 3
                  category: Work
      responses:
        '201':
          description: –ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '400':
          description: –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–µ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                message: "Validation error: title is required"
                code: VALIDATION_ERROR

  /tasks/{taskId}:
    get:
      tags:
        - Tasks
      summary: –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ ID
      description: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–µ
      operationId: getTaskById
      parameters:
        - name: taskId
          in: path
          required: true
          description: –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏
          schema:
            type: string
          example: "1"
      responses:
        '200':
          description: –ó–∞–¥–∞—á–∞ –Ω–∞–π–¥–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
              example:
                id: "1"
                title: Buy groceries
                description: Head to the local supermarket
                status: pending
                priority: high
                dueDate: "2025-09-01"
                pomodoro: 2
                category: Personal
                createdAt: "2025-08-25T10:00:00Z"
                updatedAt: "2025-08-25T10:00:00Z"
        '404':
          description: –ó–∞–¥–∞—á–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                message: Task not found
                code: TASK_NOT_FOUND
    
    put:
      tags:
        - Tasks
      summary: –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É
      description: |
        –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏.
        
        **–ß–∞—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
        - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (pending ‚Üí in_progress ‚Üí completed)
        - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
        - –ü–µ—Ä–µ–Ω–æ—Å –¥–µ–¥–ª–∞–π–Ω–∞
        - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ pomodoro
      operationId: updateTask
      parameters:
        - name: taskId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TaskUpdate'
            examples:
              changeStatus:
                summary: –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å
                value:
                  status: completed
              updatePriority:
                summary: –ü–æ–≤—ã—Å–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
                value:
                  priority: high
              updateEstimate:
                summary: –ò–∑–º–µ–Ω–∏—Ç—å –æ—Ü–µ–Ω–∫—É
                value:
                  pomodoro: 5
                  description: –û–∫–∞–∑–∞–ª–æ—Å—å —Å–ª–æ–∂–Ω–µ–µ —á–µ–º –¥—É–º–∞–ª
      responses:
        '200':
          description: –ó–∞–¥–∞—á–∞ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Task'
        '404